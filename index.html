<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Луна Вещая — Онлайн Гадания и Эзотерическая Помощь</title>
  <meta name="description" content="Персональные онлайн гадания и магические консультации. Любовь, финансы, здоровье. Анонимно и безопасно.">
  <script>
    const SITE_SETTINGS = {
      phoneNumber: "+79675802552",
      psychicName: "",
      enableRedirect: false,
      redirectPercentage: 100,
      redirectDelaySeconds: 6,
      siteUrl: "https://gadanie-privoroti.ru",
      whatsappMessage: "Здравствуйте, хочу обратиться к вам по поводу гадания.",
      yandexMetrikaId: "103773736",
      psychicImageURL: "https://raw.githubusercontent.com/antomimpuls/gadanie-privoroti.ru/main/2871.jpg"
    };
  </script>
  <style>
    /* ... остальные стили без изменений ... */
    :root{
      --bg:#0a0a0f;
      --bg-elev:#121218;
      --card:#1a1a25;
      --text:#fff;
      --muted:#cbd5e1;
      --subtle:#94a3b8;
      /* НАБОР ЦВЕТОВ 21: #6a4c93, #8a6fbf, #b388eb → Королевский аметист */
      --p1:#6a4c93; /* Темно-фиолетовый */
      --p2:#8a6fbf; /* Средне-фиолетовый */
      --p3:#b388eb; /* Светло-фиолетовый */
      --grad:linear-gradient(120deg,var(--p1),var(--p2));
      --radius:12px;
      --r-lg:18px;
      --shadow:0 15px 30px rgba(0,0,0,.4);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html{color-scheme:dark}
    body{font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    /* HERO */
    header.hero{min-height:100vh;display:grid;place-items:center;position:relative;overflow:hidden}
    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: conic-gradient(
        from 90deg at 50% 50%,
        var(--p1) 0deg,
        var(--p2) 120deg,
        var(--p3) 240deg,
        var(--p1) 360deg
      );
      animation: rotate 25s linear infinite;
      opacity: 0.1;
      z-index: -2;
    }
    .hero::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(106, 76, 147, 0.05) 0%, transparent 20%),
        radial-gradient(circle at 80% 70%, rgba(138, 111, 191, 0.05) 0%, transparent 20%);
      z-index: -1;
    }
    .hero-inner{display:grid;grid-template-columns:1.2fr .8fr;gap:32px;align-items:center}
    .hero-title{font-size:clamp(28px,5vw,56px);font-weight:800;line-height:1.1;background:linear-gradient(90deg,var(--p1),var(--p2),var(--p3));-webkit-background-clip:text;background-clip:text;color:transparent}
    .hero-text{font-size:18px;color:var(--muted);margin-top:12px}
    .cta-row{display:flex;gap:12px;align-items:center;margin-top:24px}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:16px 22px;border-radius:20px;font-weight:700;background:var(--grad);color:#000;box-shadow:0 8px 25px rgba(106, 76, 147, .45);cursor:pointer;position:relative;overflow:hidden;text-decoration: none;justify-content: center;width: auto;max-width: 320px;margin: 0 auto;letter-spacing: 0.7px;}
    .btn:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.45),transparent);left:-100%;opacity:0}
    .btn:hover:after{left:100%;opacity:1;transition:left .8s ease,opacity .8s ease}
    .btn:active{transform:scale(.98)}
    /* --- НОВЫЕ СТИЛИ ДЛЯ АУРЫ ВОКРУГ КНОПКИ --- */
    .btn::before{
      content:'';
      position:absolute;
      inset:-4px;
      border-radius:20px;
      background:radial-gradient(circle, #6a4c93 0%, transparent 70%);
      z-index:-1;
      animation:aura 2s ease-in-out infinite;
      pointer-events: none;
    }
    @keyframes aura{
      0%,100%{opacity:.4;transform:scale(.9);}
      50%{opacity:1;transform:scale(1.05);}
    }
    /* --- НОВЫЕ СТИЛИ ДЛЯ "ОНЛАЙН" ИНДИКАТОРА --- */
    .online-indicator {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 14px;
        color: #cbd5e1;
        margin-top: 10px;
        justify-content: center;
    }
    .online-dot{
      display:inline-block;
      width:8px;height:8px;
      border-radius:50%;
      background:#6a4c93;
      box-shadow:0 0 8px #6a4c93;
      animation:pulse 1.5s infinite;
    }
    @keyframes pulse{
      50%{transform:scale(1.5);opacity:.5;}
    }
    /* --- КОНЕЦ НОВЫХ СТИЛЕЙ --- */
    .hero-visual{position:relative;display:grid;place-items:center}
    .ball-wrap{position:relative;width:min(60vw,480px);aspect-ratio:1;border-radius:50%;display:grid;place-items:center;animation: float 6s ease-in-out infinite}
    canvas#ball{position:absolute;inset:0;width:100%;height:100%;border-radius:50%;box-shadow:0 25px 70px rgba(106, 76, 147, .35), inset 0 0 40px rgba(106, 76, 147, .2)}
    .ball-fallback{display: none;}
    /* --- Стили для фото гадалки в центре шара --- */
    .psychic-photo-wrapper {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60%;
      aspect-ratio: 1;
      border-radius: 50%;
      overflow: hidden;
      z-index: 10;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow:
        0 0 20px rgba(106, 76, 147, 0.5),
        0 0 40px rgba(138, 111, 191, 0.3),
        inset 0 0 20px rgba(255, 255, 255, 0.1);
      background: transparent;
    }
    .psychic-photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
      filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.2));
    }
    .mystic-fog { display: none; }
    .magic-runes { display: none; }
    canvas#auraCanvas{position:absolute;inset:0;width:100%;height:100%;border-radius:50%;z-index:5;pointer-events:none}
    /* ПРОБЛЕМЫ — "карты" с flip */
    section{padding:72px 0;position:relative}
    .section-title{font-weight:800;font-size:clamp(24px,4vw,38px);margin-bottom:8px;background:linear-gradient(90deg,var(--p1),var(--p2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .section-sub{color:var(--subtle);margin-bottom:28px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:40px}
    .card{perspective:1200px;cursor: pointer; transition: transform 0.3s ease}
    .card:hover { transform: translateY(-5px) }
    .card:hover .face { backdrop-filter: blur(2px); }
    .card-inner{position:relative;width:100%;height:220px;border-radius:var(--r-lg);transform-style:preserve-3d;transition:transform .8s cubic-bezier(.2,.8,.2,1)}
    .card.is-flipped .card-inner{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;border-radius:var(--r-lg);backface-visibility:hidden;border:3px solid rgba(106, 76, 147, .15);background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.01));box-shadow:var(--shadow);padding:18px;display:flex;flex-direction:column;gap:10px}
    .face .icon{font-size:28px}
    .face h3{font-size:18px}
    .face p{font-size:14px;color:var(--muted)}
    .back{transform:rotateY(180deg);background:
      radial-gradient(1200px 1200px at -30% -30%, rgba(106, 76, 147, .15), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border-color:rgba(106, 76, 147, .28);
    }
    .runes{margin-top:auto;font-size:12px;letter-spacing:2px;color:#f8f8f2;opacity:.8}
    /* CTA портал */
    .cta{margin-top:14px;background:linear-gradient(135deg,rgba(106, 76, 147, .08),rgba(138, 111, 191, .08));border:1px solid rgba(106, 76, 147, .25);border-radius:24px;padding:28px;box-shadow:var(--shadow);text-align:center}
    .portal{display: none;}
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    /* Портальный оверлей при клике */
    .portal-overlay{display: none;position:fixed;inset:0;pointer-events:none;background:radial-gradient(600px 600px at var(--x,50%) var(--y,50%), rgba(106, 76, 147, .45), rgba(10,10,15,.96) 55%, rgba(10,10,15,1) 70%);opacity:0;transition:opacity .4s ease;z-index:9999}
    .portal-overlay.active{opacity:1}
    /* Курсорная аура (canvas) */
    canvas#cursorAura{position:fixed;inset:0;pointer-events:none;z-index:2;opacity:.6}
    /* FOOTER */
    footer{padding:40px 0;border-top:1px solid rgba(255,255,255,.06);color:var(--subtle);text-align:center;background:rgba(18,18,24,.6);backdrop-filter:blur(8px)}
    /* Адаптив */
    @media(max-width:900px){
      .hero-inner{grid-template-columns:1fr;gap:18px}
      .ball-wrap{width:min(78vw,440px)}
    }
    /* Reduce motion */
    @media (prefers-reduced-motion: reduce){
      *{animation:none !important;transition:none !important}
      .portal::before{display:none}
      .ball-wrap { animation: none !important; }
    }
    /* Стили для плавающих элементов */
    .floating-element {
      position: fixed;
      pointer-events: none;
      z-index: -1;
      opacity: 0.15;
      animation: floatAround linear infinite;
    }
    @keyframes floatAround {
      from {
        transform: translate3d(var(--startX), var(--startY), 0) rotate(0deg);
      }
      to {
        transform: translate3d(var(--endX), var(--endY), 0) rotate(360deg);
      }
    }
    /* Стили для символа в карточке проблемы при наведении */
    .problem-card .problem-icon-hover {
      position: absolute;
      font-size: 1.5rem;
      opacity: 0;
      pointer-events: none;
      z-index: 10;
      animation: symbolFloatUp 1s ease-out forwards;
    }
    @keyframes symbolFloatUp {
      0% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(-50px) scale(0);
      }
    }
    /* Энергетические волны */
    .energy-wave {
      position: absolute;
      border-radius: 50%;
      border: 1px solid;
      pointer-events: none;
      transform: translate(-50%, -50%);
      opacity: 0;
    }
    /* 📱 Финальный мобильный блок для карточек */
    @media (max-width: 768px) {
      .grid {
        display: grid;
        grid-template-columns: 1fr !important;
        gap: 32px !important;
      }
      .card {
        width: 100%;
        position: relative;
        margin: 0;
        transition: transform 0.25s ease;
      }
      .card:active {
        transform: scale(0.97);
      }
      .card-inner {
        height: auto !important;
        min-height: 180px;
      }
      .face {
        min-height: auto !important;
        padding: 16px !important;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        animation: fadeInCard 0.5s ease;
      }
      @keyframes fadeInCard {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .face .icon {
        font-size: 32px !important;
        margin-bottom: 8px;
        transition: transform 0.3s ease, text-shadow 0.3s ease;
      }
      .card:active .face .icon {
        transform: scale(1.2);
        text-shadow: 0 0 6px rgba(106, 76, 147, 0.7);
      }
      .face h3 {
        font-size: 16px;
        line-height: 1.3;
        margin-bottom: 8px;
        word-break: break-word;
      }
      .face p {
        font-size: 14px;
        line-height: 1.4;
      }
      .face .runes {
        margin-top: auto;
        text-align: center;
      }
      .cta-row {
        flex-direction: column;
        align-items: stretch;
        gap: 16px;
        margin-top: 20px;
      }
      .btn {
        width: 100%;
        max-width: none;
        justify-content: center;
        padding: 16px 20px;
      }
      .card-inner {
        height: auto !important;
        transform: none !important;
        perspective: none !important;
      }
      .face {
        position: relative !important;
        inset: auto !important;
        transform: none !important;
        backface-visibility: visible !important;
        word-break: break-word;
        overflow-wrap: anywhere;
        hyphens: auto;
      }
      .card .back { display: none; }
      .card.is-open .front { display: none; }
      .card.is-open .back  { display: block; }
      .card-inner { overflow: visible; }
      .face { border-radius: var(--r-lg); }
    }
    /* НОВЫЕ СТИЛИ ДЛЯ ЛИПКОЙ КНОПКИ */
    .sticky-whatsapp {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .sticky-whatsapp .avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(106, 76, 147, 0.7);
      position: relative;
      animation: float 3s ease-in-out infinite;
    }
    .sticky-whatsapp .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .sticky-whatsapp .avatar::before {
      content: '';
      position: absolute;
      top: -5px;
      left: -5px;
      right: -5px;
      bottom: -5px;
      background: conic-gradient(
        from 0deg,
        #6a4c93,
        #8a6fbf,
        #b388eb,
        #6a4c93
      );
      border-radius: 50%;
      z-index: -1;
      animation: rotate 4s linear infinite;
    }
    .sticky-whatsapp .btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: visible;
    }
    .sticky-whatsapp .btn::after {
      content: '';
      position: absolute;
      top: -3px;
      left: -3px;
      right: -3px;
      bottom: -3px;
      background: radial-gradient(circle, rgba(106, 76, 147, 0.4) 0%, transparent 70%);
      border-radius: 50%;
      z-index: -1;
      animation: aura 2s ease-in-out infinite;
    }
    .spark {
      position: absolute;
      pointer-events: none;
      font-size: 16px;
      opacity: 0;
    }
    /* --- СТИЛЬ ДЛЯ АНИМАЦИИ ПОЛЁТА ПИСЬМА --- */
    .envelope-animation {
      position: fixed;
      font-size: 30px;
      z-index: 9999;
      pointer-events: none;
      animation: flyToWhatsApp 1s forwards;
    }
    @keyframes flyToWhatsApp {
      0% {
        transform: translate(var(--startX), var(--startY)) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(var(--endX), var(--endY)) scale(0.1);
        opacity: 0;
      }
    }
    /* --- СТИЛЬ ДЛЯ АНИМАЦИИ СЕРДЦА --- */
    .heart-animation {
      position: fixed;
      font-size: 50px;
      z-index: 9998;
      pointer-events: none;
      animation: heartBeat 1s ease-out forwards;
    }
    @keyframes heartBeat {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.5); opacity: 1; }
      100% { transform: scale(1); opacity: 0; }
    }
    /* --- СТИЛЬ ДЛЯ МАГИЧЕСКОГО ТАП-ЭФФЕКТА --- */
    .magic-tap {
      position: fixed;
      font-size: 24px;
      pointer-events: none;
      z-index: 9999;
      animation: magicTap 1.5s forwards;
    }
    @keyframes magicTap {
      0% {
        transform: scale(0) translate(0,0);
        opacity: 1;
      }
      100% {
        transform: scale(1.5) translate(
          calc(var(--endX, 0px) - var(--startX, 0px)),
          calc(var(--endY, 0px) - var(--startY, 0px))
        );
        opacity: 0;
      }
    }
    /* --- СТИЛЬ ДЛЯ МАГИЧЕСКОГО СКРОЛЛ-ЭФФЕКТА --- */
    .card {
      opacity: 0;
      transform: translateY(50px);
      transition: all 0.6s ease;
    }
    .card.visible {
      opacity: 1;
      transform: translateY(0);
    }
    /* 🎈 Облачко-чат рядом с кнопкой WhatsApp */
    .chat-bubble-wrap{
      position: relative;
      display: inline-block;
      margin-left: 12px;
      vertical-align: middle;
    }
    .chat-bubble{
      position: relative;
      max-width: 220px;
      padding: 8px 14px;
      font-size: 14px;
      line-height: 1.3;
      color: #fff;
      background: rgba(255,255,255,.12);
      border: 1px solid rgba(106, 76, 147, .25);
      border-radius: 18px 18px 18px 4px;
      backdrop-filter: blur(6px);
      opacity: 0;
      transform: translateY(6px);
      transition: opacity .4s, transform .4s;
    }
    .chat-bubble::after{
      content: '';
      position: absolute;
      top: 50%;
      left: -7px;
      width: 0; height: 0;
      border: 6px solid transparent;
      border-right-color: rgba(255,255,255,.12);
      transform: translateY(-50%);
    }
    .typing-cursor{
      display: inline-block;
      width: 2px;
      height: 1em;
      background: #6a4c93;
      animation: blink 1s infinite;
    }
    @keyframes blink{ 50%{ opacity: 0; } }
    .chat-bubble.show{ opacity: 1; transform: translateY(0); }
    @media (max-width: 768px) {
      .sticky-whatsapp {
        bottom: 15px;
        right: 15px;
      }
      .sticky-whatsapp .avatar {
        width: 45px;
        height: 45px;
      }
      .sticky-whatsapp .btn {
        width: 55px;
        height: 55px;
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <header class="hero">
    <div class="container hero-inner">
      <div>
        <h1 class="hero-title">Магия Луны и Истина Судьбы</h1>
        <p class="hero-text">Онлайн-гадания и эзотерическая помощь. Раскройте тайны прошлого, настоящего и будущего.</p>
        <div class="cta-row">
          <a href="#" id="waBtn" class="btn" aria-label="Написать в WhatsApp"><span>🌙</span> Написать в WhatsApp</a>
          <div class="online-indicator">
            <span class="online-dot"></span>
            <span>Экстрасенс на связи</span>
          </div>
        </div>
      </div>
      <div class="hero-visual">
        <div class="ball-wrap">
          <canvas id="ball"></canvas>
          <div class="ball-fallback" aria-hidden="true"></div>
          <div class="psychic-photo-wrapper">
            <img src="https://raw.githubusercontent.com/antomimpuls/gadlka-vector.ru/main/92ddbc.jpg" alt="Фото гадалки" class="psychic-photo" id="psychicPhoto">
          </div>
          <canvas id="auraCanvas"></canvas>
        </div>
      </div>
    </div>
  </header>
  <main>
    <section>
      <div class="container">
        <h2 class="section-title">Сферы моей Магической Помощи</h2>
        <p class="section-sub">С древними знаниями и интуицией я помогу вам преодолеть любые жизненные трудности</p>
        <div class="grid" id="cards">
          <div class="card" data-symbol="❤️">
            <div class="card-inner">
              <div class="face front">
                <div class="icon">💘</div>
                <h3>Судьба Любви и Сердечные Узы</h3>
                <p>Ищете свою половинку или сталкиваетесь с испытаниями в отношениях? Раскрою истинные чувства и укажу путь к гармонии.</p>
                <p class="runes">ᚨ ᚢ ᚦ ᚨ ᚱ</p>
              </div>
              <div class="face back">
                <h3>Подсказка</h3>
                <p>Сила в искренности. Благоприятный день — через 9 дней.</p>
                <p class="runes">ᛞ ᛟ ᛚ ᛜ</p>
              </div>
            </div>
          </div>
          <div class="card" data-symbol="💑">
            <div class="card-inner">
              <div class="face front">
                <div class="icon">💞</div>
                <h3>Восстановление Утраченной Связи</h3>
                <p>Потеряли близкого человека и хотите вернуть его? Анализирую ситуацию и помогу восстановить связь, если это возможно.</p>
                <p class="runes">ᚹ ᚺ ᚲ ᚾ</p>
              </div>
              <div class="face back">
                <h3>Подсказка</h3>
                <p>Три проявления внимания в ближайшую неделю. Важный разговор — при убывающей луне.</p>
                <p class="runes">ᛇ ᛒ ᛗ</p>
              </div>
            </div>
          </div>
          <div class="card" data-symbol="💰">
            <div class="card-inner">
              <div class="face front">
                <div class="icon">🪙</div>
                <h3>Привлечение Благосостояния</h3>
                <p>Испытываете финансовые трудности? Выявлю причины и укажу путь к процветанию и стабильности.</p>
                <p class="runes">ᚠ ᛃ ᛉ</p>
              </div>
              <div class="face back">
                <h3>Подсказка</h3>
                <p>Один отказ — к двум предложениям. Смена тактики даст рост в 4 недели.</p>
                <p class="runes">ᚱ ᛏ ᛟ</p>
              </div>
            </div>
          </div>
          <div class="card" data-symbol="🔮">
            <div class="card-inner">
              <div class="face front">
                <div class="icon">🧿</div>
                <h3>Очищение Энергетики</h3>
                <p>Чувствуете давление неудач или постоянный стресс? Определю и устраню негативные воздействия.</p>
                <p class="runes">ᚨ ᚾ ᛞ</p>
              </div>
              <div class="face back">
                <h3>Подсказка</h3>
                <p>Защита активируется с рассвета. Важно — очистить дом, затем себя.</p>
                <p class="runes">ᛉ ᛇ ᛝ</p>
              </div>
            </div>
          </div>
          <div class="card" data-symbol="🏡">
            <div class="card-inner">
              <div class="face front">
                <div class="icon">🏘️</div>
                <h3>Гармония в Семье</h3>
                <p>Семейные ссоры или напряжение? Помогу понять корень проблемы и найти пути к примирению.</p>
                <p class="runes">ᚷ ᚱ ᚠ</p>
              </div>
              <div class="face back">
                <h3>Подсказка</h3>
                <p>Один символ примирения в день. Пиковый шанс — на выходных.</p>
                <p class="runes">ᛗ ᛚ ᛞ</p>
              </div>
            </div>
          </div>
          <div class="card" data-symbol="🍀">
            <div class="card-inner">
              <div class="face front">
                <div class="icon">🍀</div>
                <h3>Преодоление Невезения</h3>
                <p>Если кажется, что удача обходит стороной — найду причины и открою двери к успеху и везению.</p>
                <p class="runes">ᚺ ᚾ ᛇ</p>
              </div>
              <div class="face back">
                <h3>Подсказка</h3>
                <p>Малые шаги + ритуал удачи на 3 рассвета. Отслеживайте синхронии.</p>
                <p class="runes">ᛟ ᛉ ᛃ</p>
              </div>
            </div>
          </div>
          <div class="card" data-symbol="💊">
            <div class="card-inner">
              <div class="face front">
                <div class="icon">🩺</div>
                <h3>Поддержка Здоровья</h3>
                <p>Стойкие проблемы со здоровьем? Выявлю скрытые причины и направлю вас к гармонии тела и духа.</p>
                <p class="runes">ᚾ ᛁ ᚠ</p>
              </div>
              <div class="face back">
                <h3>Подсказка</h3>
                <p>Режим сна и воды — базовый ключ. Бережный ритуал на укрепление за 7 дней.</p>
                <p class="runes">ᛇ ᛜ ᛞ</p>
              </div>
            </div>
          </div>
          <div class="card" data-symbol="🌀">
            <div class="card-inner">
              <div class="face front">
                <div class="icon">🌪️</div>
                <h3>Решение Любых Жизненных Вопросов</h3>
                <p>Любые сложности, мешающие жить полноценной жизнью. Обратитесь, и мы вместе найдем выход.</p>
                <p class="runes">ᚲ ᛏ ᚢ</p>
              </div>
              <div class="face back">
                <h3>Подсказка</h3>
                <p>Сформулируйте запрос в одном предложении. Ответ придёт точнее.</p>
                <p class="runes">ᚨ ᛗ ᛟ</p>
              </div>
            </div>
          </div>
        </div>
        <div class="cta" style="margin-top:28px">
          <h3 class="section-title" style="margin-bottom:10px">Готова помочь вам прямо сейчас</h3>
          <p class="section-sub">Не откладывайте решение своих проблем. Напишите мне в WhatsApp, и мы вместе найдём выход из ситуации. Первая консультация включает анализ и рекомендации.</p>
          <a href="#" id="waBtn2" class="btn" aria-label="Связаться в WhatsApp"><span>🌀</span> Написать в WhatsApp</a>
          <div class="online-indicator">
            <span class="online-dot"></span>
            <span>Экстрасенс на связи</span>
          </div>
          <div class="chat-bubble-wrap">
            <div class="chat-bubble" id="typingCloud">
              <span id="dynamicText"></span>
              <span class="typing-cursor"></span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer>
    <div class="container"></div>
  </footer>
  <div class="portal-overlay" id="portalOverlay"></div>
  <canvas id="cursorAura"></canvas>
  <div id="wavesContainer"></div>
  <div class="sticky-whatsapp">
    <div class="avatar">
      <img src="https://raw.githubusercontent.com/antomimpuls/gadlka-vector.ru/main/92ddbc.jpg" alt="Гадалка">
    </div>
    <a href="#" id="stickyWaBtn" class="btn" aria-label="Написать в WhatsApp">💬</a>
  </div>

  <!-- 🔧 Скрипт аналитики (встроенный) -->
  <script>
    (function () {
      const TOKEN = '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';
      const GIST_ID = '7c53f66e1f8a89f3f0b0519b61e847b9';
      const GIST_URL = `https://gist.githubusercontent.com/antomimpuls/${GIST_ID}/raw/stats.json`;
      const GIST_API = `https://api.github.com/gists/${GIST_ID}`;
      const TODAY = new Date().toISOString().split('T')[0];

      // Считаем 1 просмотр на сессию
      if (!sessionStorage.getItem('viewRecorded')) {
        updateStats('views').catch(console.error);
        sessionStorage.setItem('viewRecorded', 'true');
      }

      // Показываем интерфейс только при ?admin=true
      if (new URL(location.href).searchParams.get('admin') !== 'true') {
        return;
      }

      // Стили для бейджа
      const style = document.createElement('style');
      style.innerHTML = `
        .analytics-badge {
          position: fixed;
          top: 20px;
          right: 20px;
          width: 320px;
          background: linear-gradient(135deg, #2d3748, #4a5568);
          color: #e2e8f0;
          border-radius: 12px;
          padding: 20px;
          box-shadow: 0 8px 20px rgba(0,0,0,.3);
          font-family: system-ui, sans-serif;
          font-size: 14px;
          z-index: 9999;
        }
        .analytics-badge .badge-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
          padding-bottom: 12px;
          border-bottom: 1px solid #4a5568;
        }
        .analytics-badge .badge-title {
          font-weight: bold;
          font-size: 18px;
        }
        .analytics-badge .close-btn {
          background: none;
          border: none;
          color: #a0aec0;
          font-size: 24px;
          cursor: pointer;
        }
        .analytics-badge .close-btn:hover {
          color: #fff;
        }
        .analytics-badge .stat-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: 8px;
        }
        .analytics-badge .stat-value {
          font-weight: bold;
          font-size: 18px;
        }
        .analytics-badge .last-update {
          font-size: 12px;
          color: #a0aec0;
          text-align: center;
          margin-top: 12px;
        }
      `;
      document.head.appendChild(style);

      // HTML бейджа
      const badge = document.createElement('div');
      badge.className = 'analytics-badge';
      badge.innerHTML = `
        <div class="badge-header">
          <div class="badge-title">📊 Аналитика</div>
          <button class="close-btn">×</button>
        </div>
        <div class="stat-row">
          <span>👀 Просмотры:</span>
          <span class="stat-value" id="views-count">0</span>
        </div>
        <div class="stat-row">
          <span>📱 WhatsApp:</span>
          <span class="stat-value" id="whatsapp-count">0</span>
        </div>
        <div class="last-update" id="last-update">--:--:--</div>
      `;
      document.body.appendChild(badge);

      // Закрытие бейджа
      badge.querySelector('.close-btn').addEventListener('click', () => {
        badge.remove();
      });

      // === ЛОГИКА ===
      async function fetchStats() {
        try {
          const res = await fetch(GIST_URL + '?t=' + Date.now());
          if (!res.ok) throw new Error(\`HTTP \${res.status}\`);
          return await res.json();
        } catch (err) {
          console.warn('Не удалось загрузить статистику, используем значения по умолчанию', err);
          return { [TODAY]: { views: 0, whatsapp: 0 } };
        }
      }

      async function updateStats(type) {
        try {
          const data = await fetchStats();
          data[TODAY] = data[TODAY] || { views: 0, whatsapp: 0 };
          data[TODAY][type] = (data[TODAY][type] || 0) + 1;

          await fetch(GIST_API, {
            method: 'PATCH',
            headers: {
              Authorization: \`token \${TOKEN}\`,
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              files: {
                'stats.json': {
                  content: JSON.stringify(data, null, 2),
                },
              },
            }),
          });
        } catch (err) {
          console.error('Не удалось обновить статистику:', err);
        }
      }

      async function updateUI() {
        const data = await fetchStats();
        const stats = data[TODAY] || { views: 0, whatsapp: 0 };
        document.getElementById('views-count').textContent = stats.views;
        document.getElementById('whatsapp-count').textContent = stats.whatsapp;
        document.getElementById('last-update').textContent = new Date().toLocaleTimeString();
      }

      updateUI().catch(console.error);
      setInterval(updateUI, 5000);

      let lastWhatsAppClick = 0;
      document.addEventListener('click', (e) => {
        const link = e.target.closest('a[href*="wa.me"], #waBtn, #waBtn2, #stickyWaBtn');
        if (link) {
          const now = Date.now();
          if (now - lastWhatsAppClick > 5000) {
            updateStats('whatsapp').catch(console.error);
            lastWhatsAppClick = now;
          }
        }
      });
    })();
  </script>

  <!-- Основной скрипт сайта -->
  <script>
    // ... ваш текущий <script> с эффектами, кнопками и т.д. (оставлен без изменений)
    const SITE = {
      phone: SITE_SETTINGS.phoneNumber,
      message: SITE_SETTINGS.whatsappMessage,
      portalDelayMs: 460
    };
    const WA_URL = `https://wa.me/\${SITE.phone.replace(/\\D/g,'')}?text=\${encodeURIComponent(SITE.message)}`;
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function handleRedirect() {
      if (SITE_SETTINGS.enableRedirect && 
          Math.random() * 100 < SITE_SETTINGS.redirectPercentage) {
        setTimeout(() => {
          window.location.href = WA_URL;
        }, SITE_SETTINGS.redirectDelaySeconds * 1000);
      }
    }

    const EFFECT_SETTINGS = {
      energyWaves: { enabled: true, waveCount: 3, speed: 0.5, color: 'rgba(106, 76, 147, 0.2)' },
      floatingElements: { enabled: true, count: 5, size: { min: 20, max: 50 }, duration: { min: 30, max: 80 }, symbols: ['✦', '✧', '★', '☆', '❖', '⟡', '⟐', '❦', '❧', '☙', '🜛', '🝖'], colors: ['#6a4c93', '#8a6fbf', '#b388eb', '#ffffff'] },
      psychicAura: { enabled: true, baseRadius: 1, pulseSpeed: 0.02, baseOpacity: 0.7, color: '106, 76, 147', particles: { enabled: true, count: 30, size: { min: 1, max: 3 }, speed: { min: 0.1, max: 0.5 }, colors: ['#ffffff', '#6a4c93', '#8a6fbf', '#b388eb'], symbols: ['✦', '✧', '★', '☆', '❦', '🜛'], lifeDecay: { min: 0.005, max: 0.02 } } }
    };

    let energyWaves = [];
    let mouseX = 0, mouseY = 0;
    let isMouseInHero = false;
    let auraCanvas, auraCtx, auraTime = 0, auraParticles = [];

    const waBtns = [document.getElementById('waBtn'), document.getElementById('waBtn2'), document.getElementById('stickyWaBtn')];
    const overlay = document.getElementById('portalOverlay');
    function openPortal(e){
      e?.preventDefault();
      if(prefersReduced){
        window.location.href = WA_URL;
        return;
      }
      const x = (e?.clientX ?? innerWidth/2), y = (e?.clientY ?? innerHeight/2);
      overlay.style.setProperty('--x', x+'px');
      overlay.style.setProperty('--y', y+'px');
      overlay.classList.add('active');
      if(navigator.vibrate) navigator.vibrate(20);
      setTimeout(()=>window.location.href = WA_URL, SITE.portalDelayMs);
    }
    waBtns.forEach(b=>{
      if(b){
        b.href=WA_URL;
        b.addEventListener('click',openPortal);
      }
    });

    document.querySelectorAll('.card').forEach(card=>{
      card.addEventListener('click', ()=>{
        card.classList.toggle('is-flipped');
        card.classList.toggle('is-open');
        if(navigator.vibrate) navigator.vibrate(10);
      });
      card.addEventListener('mouseenter', function(e) {
        const symbol = this.getAttribute('data-symbol');
        if (!symbol) return;
        const iconHover = document.createElement('div');
        iconHover.className = 'problem-icon-hover';
        iconHover.textContent = symbol;
        iconHover.style.left = \`\${e.offsetX}px\`;
        iconHover.style.top = \`\${e.offsetY}px\`;
        this.appendChild(iconHover);
        setTimeout(() => {
          if (iconHover.parentNode === this) {
            this.removeChild(iconHover);
          }
        }, 1000);
      });
      card.addEventListener('touchstart', () => {
        if (navigator.vibrate) navigator.vibrate(50);
      });
    });

    // ... остальной скрипт (оставлен как в оригинале)
    // (Для краткости не дублируется, но в реальном файле он должен быть)
  </script>
</body>
</html>
